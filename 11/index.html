<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    <style>
        table.string-table {
            text-align: center;
        }

        table.string-table th,
        td {
            border: 1px solid gray;
            padding: 4px;
        }

        table.string-table th.L {
            border-left: 4px solid #0d6efd;
        }

        table.string-table td.L {
            border-left: 4px solid #0d6efd;
            border-bottom: 4px solid #0d6efd;
        }

        .font-smaller {
            font-size: 0.8rem;
        }

        .input-example {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .input-example>* {
            flex:1 1 0;
        }

        .input-example>span {
            flex:0 0 auto;
        }

        .hidden {
            display: none;
        }

        .error {
            color: red;
        }

        .error input{
            border-color: red;
            border-style: solid;
            border-width: 2px;
        }

        .error-label {
            font-size: 0.8em;
        }
    </style>
</head>

<body>
    <h2 class="text-center">Formos</h2>
    <div class="container">
        <div class="row border rounded ">
            <ul id="page-tabs" class="nav nav-tabs">
                <li class="nav-item">
                    <button class="nav-link h-100" data-bs-toggle="tab" data-bs-target="#tab-1"
                        type="button">Prisiminimas</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link h-100" data-bs-toggle="tab" data-bs-target="#tab-2"
                        type="button">onsubmit</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link h-100" data-bs-toggle="tab" data-bs-target="#tab-3"
                        type="button">FormData</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link h-100" data-bs-toggle="tab" data-bs-target="#tab-4"
                        type="button">event.target.elements</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link h-100" data-bs-toggle="tab" data-bs-target="#tab-5"
                        type="button">Validacija</button>
                </li>
            </ul>
            <div class="tab-content pt-3" id="myTabContent">
                <div class="tab-pane fade show" id="tab-1" role="tabpanel">
                    <h4>Prisiminimas</h4>
                    <p>
                        Formos susideda iš &lt;form&gt; elemento ir jame esančių &lt;input&gt; ir kitų formoms skirtų elementų.
                    </p>
                    <p>
                        &lt;form&gt; elementas turi atributus action ir method, kurie pasako kur siųsti formos duomenis ir kokiu HTTP metodu.
                    </p>
                    <p>
                        Input elementai turi atributą name, kuris pasako kokiu pavadinimu elemento reikšmė bus išsiųstas.
                    </p>
                    <form onsubmit="generateExampleSubmit(event)">
                        <div class="container">
                            <div class="row">
                                <div class="input-example col-lg-6">
                                    <span class="font-smaller">&lt;input type="text" name="name"/&gt;</span><input type="text" name="name"/>
                                </div>
                                <div class="input-example col-lg-6">
                                    <span class="font-smaller">&lt;input type="password" name="password"/&gt;</span><input type="password" name="password"/>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-example col-lg-6">
                                    <span class="font-smaller">&lt;input type="date" name="date"/&gt;</span><input type="date" name="date"/>
                                </div>
                                <div class="input-example col-lg-6">
                                    <span class="font-smaller">&lt;input type="file" name="file"/&gt;</span><input type="file" name="file"/>
                                </div>
                            </div>
                            <div class="row justify-content-center align-items-center my-3">
                                <div class="font-smaller w-auto">
<pre>
&lt;div&gt;
    &lt;input type="radio" name="radio" value="foo" id="radio-foo"/&gt;
    &lt;label for="radio-foo"&gt;foo&lt;/label&gt;
&lt;/div&gt;
&lt;div&gt;
    &lt;input type="radio" name="radio" value="bar" id="radio-bar"/&gt;
    &lt;label for="radio-bar"&gt;bar&lt;/label&gt;
&lt;/div&gt;
&lt;div&gt;
    &lt;input type="radio" name="radio" value="baz" id="radio-baz"/&gt;
    &lt;label for="radio-baz"&gt;baz&lt;/label&gt;
&lt;/div&gt;
</pre>
                                </div>
                                <div class="d-flex flex-column w-auto">
                                    <div>
                                        <input type="radio" name="radio" value="foo" id="radio-foo"/>
                                        <label for="radio-foo">foo</label>
                                    </div>
                                    <div>
                                        <input type="radio" name="radio" value="bar" id="radio-bar"/>
                                        <label for="radio-bar">bar</label>
                                    </div>
                                    <div>
                                        <input type="radio" name="radio" value="baz" id="radio-baz"/>
                                        <label for="radio-baz">baz</label>
                                    </div>
                                </div>
                            </div>

                            <div class="row justify-content-center align-items-center my-3">
                                <div class="font-smaller w-auto">
<pre>
&lt;select name="select"&gt;
    &lt;option value="foo" selected&gt;foo&lt;/option&gt;
    &lt;option value="bar"&gt;bar&lt;/option&gt;
    &lt;option value="baz"&gt;baz&lt;/option&gt;
&lt;/select&gt;
</pre>
                                </div>
                                <div class="d-flex flex-column w-auto">
                                    <select name="select">
                                        <option value="foo" selected>foo</option>
                                        <option value="bar">bar</option>
                                        <option value="baz">baz</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </form>
                    <div id="form-output" class="hidden">
                        <p>
                            Name: <span class="name"></span>
                        </p>
                        <p>
                            Password: <span class="password"></span>
                        </p>
                        <p>
                            Date: <span class="date"></span>
                        </p>
                        <p>
                            File: <span class="file"></span>
                        </p>
                        <p>
                            Radio: <span class="radio"></span>
                        </p>
                        <p>
                            Select: <span class="select"></span>
                        </p>
                    </div>
                    <script defer>
                        function generateExampleSubmit(event) {
                            event.preventDefault();
                            showFormData(event.target);
                        }

                        function showFormData(form) {
                            const output = document.querySelector('#form-output');
                            output.classList.remove('hidden');
                            output.querySelector('.name').innerText = form.elements['name'].value;
                            output.querySelector('.password').innerText = form.elements['password'].value;
                            output.querySelector('.date').innerText = form.elements['date'].value;
                            output.querySelector('.file').innerText = form.elements['file'].value;
                            output.querySelector('.radio').innerText = form.elements['radio'].value;
                            output.querySelector('.select').innerText = form.elements['select'].value;
                        }
                    </script>
                </div>
                <div class="tab-pane fade" id="tab-2" role="tabpanel">
                    <h4>onsubmit</h4>
                    <p>
                        onsubmit event paleidžiamas, kai formą bandoma išsiųsti. Default behavior yra surinkti duomenis į FormData objektą, 
                        išsiųsti "action" adresu ir užkrauti atsakymą kaip naują puslapį.
                    </p>
                    <p>
                        Jei norim kažką pakeisti, reikia iškviesti event.preventDefault() metodą. <strong>Forma nebus siunčiama</strong>. Tai reikės padaryti rankiniu būdu.
                    </p>
                </div>
                <div class="tab-pane fade" id="tab-3" role="tabpanel">
                    <h4>FormData</h4>
                    <p>
                        Formos duomenims siųsti yra sukurta klasė FormData. 
                    </p>
                    <pre class="js"><code>const formData = new FormData(formElement);</code></pre>
                    <p>
                        Šiuo objektu patogu surinkti formos duomenis ir siųsti į serverį, bet jį galime panaudoti ir nesiunčiant duomenų.
                    </p>
<pre class="js"><code>const formData = new FormData(formElement);
for(const [key, value] of formData.entries()) {
    console.log(key, value);
}</code></pre>
                </div>
                <div class="tab-pane fade" id="tab-4" role="tabpanel">
                    <h4>event.target.elements</h4>
                    <p>
                        Form objektą galime pasiekti per <strong>event.target</strong>. 
                        Form objektas turi visų formos elementų sąrašą, pasiekiamą per sąvybę <strong>elements</strong>.
                    </p>
                    <p>
                        Šiame sąrašę elementai kartojami du kartus: vieną kartą sudėti pagal indeksą, 
                        kitą - pagal name kaip key.
                    </p>
                    <form onsubmit="eventsExample(event)">
                        <input type="text" name="field-1" placeholder="field-1"/>
                        <input type="text" name="field-2" placeholder="field-2"/>
                        <button type="submit">Submit</button>
                    </form>
<pre class="js"><code>function eventsExample(event) {
    event.preventDefault();
    console.log(event.target.elements);
    console.log('field-1:', event.target.elements['field-1'].value);
    console.log('field-2:', event.target.elements['field-2'].value);
}</code></pre>
                    <script>
                        function eventsExample(event) {
                            event.preventDefault();
                            console.log(event.target.elements);
                            console.log('field-1:', event.target.elements['field-1'].value);
                            console.log('field-2:', event.target.elements['field-2'].value);
                        }
                    </script>
                </div>
                <div class="tab-pane fade" id="tab-5" role="tabpanel">
                    <h4>Validacija</h4>
                    <p>
                        Formų validacija tiesiog patikrinant egzistuojančias reikšmes prieš siunčiant.
                        Jei laukelis neteisingas, jam uždedama atitinkama klasė, 
                        kuri jį pažymi ir iškviečia preventDefault(). 
                        Taip pat galima uždėti atitinkamą klaidos pranešimą į atitinkamą elementą.
                    </p>
                    <p>
                        Pavyzdys: slaptažodžio laukelis, kurio ilgis turi būti didesnis už 6.
                    </p>
                    <form onsubmit="passwordSubmit(event)">
                        <div class="py-2">
                            <input type="password" name="password" placeholder="password"/>
                            <p class="error-label hidden"></p>
                        </div>
                        <button>Submit</button>
                    </form>
<pre class="js"><code>function passwordSubmit(event) {
    if(!validate(event.target)){
        event.preventDefault();
    }
}

function validate(form) {
    if(form.elements['password'].value.length <= 6) {
        const parent = form.elements['password'].parentElement;
        parent.classList.add('error');
        const label = parent.querySelector('.error-label');
        label.classList.remove('hidden');
        label.innerText = 'Password too short!';
        return false;
    }
    return true;
}</code></pre>
                    <script>
                        function passwordSubmit(event) {
                            if(!validate(event.target)){
                                event.preventDefault();
                            }
                        }
                        
                        function validate(form) {
                            if(form.elements['password'].value.length <= 6) {
                                const parent = form.elements['password'].parentElement;
                                parent.classList.add('error');
                                const label = parent.querySelector('.error-label');
                                label.classList.remove('hidden');
                                label.innerText = 'Password too short!';
                                return false;
                            }
                            return true;
                        }
                    </script>
                </div>
            </div>
        </div>
        <!-- bootstrap -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            crossorigin="anonymous"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js" integrity="sha512-gU7kztaQEl7SHJyraPfZLQCNnrKdaQi5ndOyt4L4UPL/FHDd/uB9Je6KDARIqwnNNE27hnqoWLBq+Kpe4iHfeQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/languages/javascript.min.js" integrity="sha512-5jXgs935s5HbqrOPf7Jl2CuGOdTqY/I6YtN++ucHs4qWjfG95AJMezR8TbTgKX/SiB8Mr+rubck6GRY6MspbKg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script defer>
            "use strict";

            {
                const saveTab = (element) => localStorage.setItem('activeTab', element.dataset.bsTarget);
                const onEventSaveTarget = (event) => saveTab(event.target)

                document.querySelector('#page-tabs')
                    .querySelectorAll('.nav-link')
                    .forEach(tab =>
                        tab.addEventListener('shown.bs.tab', onEventSaveTarget)
                    );

                const activeTab = localStorage.getItem('activeTab');
                if (activeTab) {
                    let tab = document.querySelector(`#page-tabs .nav-link[data-bs-target="${activeTab}"]`);
                    if(!tab) tab = document.querySelector(`#page-tabs .nav-link[data-bs-target="#tab-1"]`)
                    new bootstrap.Tab(tab).show();

                }

                document.querySelectorAll('pre.js').forEach(codeBlock => {
                    hljs.highlightElement(codeBlock);
                })
            }
        </script>
    </div>
</body>

</html>
